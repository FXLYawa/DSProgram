# Huffman文件压缩项目报告

## 项目介绍

细节及边缘情况在视频里面详细说明

## 程序实现方式

以Huffman编码为基础,项目完成了对任意文件的压缩与解压  
同时对压缩文件进行了加密,保证文件安全性  
项目还实现了文件的比较算法,来验证程序的正确性  

### 文件压缩

文件压缩采用Huffman编码的方式进行压缩  
首先以unsigned char格式统计了文件的词频,以此构成Huffman树  
然后通过Huffman编码完成压缩

### 文件解压

将词频统计结果重新读入,重构Huffman树
并以此为基础完成解密算法

### 文件加密

采用了对称流密码体系,通过一个确定的种子来生成密钥流  
对文件字符就行一对一加密  
密钥流采用梅森旋转算法,保证了种子确定的情况下  
密钥流具有高度随机性及确定性,确保了文件的安全性

### 文件比较

才用了字符串hash的形式,考虑到大型文件的效率问题
采用了以大质数作为基数与自然溢出的hash算法,在文本数据这种代码意义上随机的数据
hash碰撞的概率非常小,可以忽略不计

### 错误处理

由于错误只发生在文件操作上
所以使用库函数assert(fout.good())进行错误处理
因此使用时要保证源文件存在

## 输入输出说明

项目文件夹有$CPPS \qquad Header \qquad DeCpFile \qquad Input \qquad Result$  

输入文件请存储在Input文件夹中  由于C++库函数的string类型无法读取汉字，所以文件名需要使用英语

压缩结果会被存储在Output文件夹的txt文件  
词频统计结果会被存储在Output文件夹的csv文件
由于无法避免的对换行等特殊字符的统计, csv文件格式可能存在问题
(二进制格式,char,',',int,'\n');

解压结果存储在DeCoFile文件夹中

## 代码解释  

### Huffman类

利用优先队列来加速Huffman树的构建,并预处理了字符与01序列的映射  
复杂度:$O(nlogn)$  

### FILE操作

采用了fstream类,来完成文件的读写操作  
以二进制的格式打开文件,来完成任意文件的统一处理,加强了程序的鲁棒性  
程序能读写任意文件,并对其进行压缩,压缩率基本稳定在1.5左右  

### File比较  

采用了Hash算法,复杂度为O(N),N为文件大小  
由于不是逐字比较,保证了程序的可扩展性  
缺点是有极小概率发生Hash冲突
采用了自然溢出,使得在随机数据下,程序正确性很高且保证了效率
但是恶意攻击者可以构造出特殊数据具有相同的hash值

### Cryption类

这一命名空间下实现了两个类,加密类和解密类  
加密采用了流密码的方式,使用梅森旋转算法作为随机数发生器  
这一随机数发生器可以在很大的范围内不出重复数据,具有良好的随机性质  
由于程序的词频统计文件是暴露的,等价于Huffman的结构是暴露的,使得压缩结果不安全  
再进行加密之后,只有知道密钥的人才能获得压缩文件的信息,保证了文件安全性  
压缩算法的复杂度为$O(N)$,N为文件的大小,对程序性能基本没有影响  
